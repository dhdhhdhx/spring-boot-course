# 1. 邮件发送配置（以 QQ 邮箱为例，需开启 SMTP 服务并获取授权码）
spring:
  mail:
    host: smtp.qq.com
    port: 587
    username: 1514921150@qq.com          # 发送方邮箱
    password: tzfcxytsyubcgjbh          # QQ 邮箱 SMTP 授权码（不是登录密码）
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
  # 1. 数据库配置（Quartz 需存储任务信息到数据库）
  datasource:
    url: jdbc:mysql://localhost:3307/my_mp?useSSL=false&serverTimezone=Asia/Shanghai
    username: root
    password:
    driver-class-name: com.mysql.cj.jdbc.Driver

  # 2. Quartz 配置
  quartz:
    # 持久化方式：jdbc（存储到数据库），默认为 memory（内存，服务重启丢失）
    job-store-type: jdbc
    jdbc:
      initialize-schema: always   # always=每次启动创建，embedded=仅内存模式创建
    # 线程池配置
    properties:
      org:
        quartz:
          threadPool:
            class: org.quartz.simpl.SimpleThreadPool
            threadCount: 10                      # 核心线程数
            threadNamePrefix: quartz-thread      # 线程名称前缀
            threadPriority: 5                    # 线程优先级（1-10，默认 5）

  # 3. 日志配置
  logging:
    level:
      com.baomidou.mybatisplus.samples: debug

  # 4. MyBatis-Plus 配置
  mybatis-plus:
    configuration:
      map-underscore-to-camel-case: true            # 开启驼峰式
      log-impl: org.apache.ibatis.logging.stdout.StdoutImpl  # 调试时打印 SQL 语句
    global-config:
      db-config:
        logic-delete-field: deleted                 # 全局逻辑删除字段名
        logic-delete-value: 1                       # 逻辑已删除值（默认 1）
        logic-not-delete-value: 0                   # 逻辑未删除值（默认 0）

## 2. 天气 API 配置（使用「和风天气」免费 API，需自行注册获取 key）
#weather:
#  api:
#    key: b5ed34a2ee3640d9865e1ea5d8aca4db          # 和风天气 API 密钥
#    city: 101190101                   # 南京的城市 ID（可查和风天气城市列表）
#    url: https://devapi.qweather.com/v7/weather/3d
## 2. 高德天气API配置
weather:
  api:
    key: d0bc5406ad54e5aba4e1cc888a4b47de
    city: 320100
    url: https://restapi.amap.com/v3/weather/weatherInfo
    extensions: all

# 3. 接收邮件列表
email:
  recipients: 1514921150@qq.com   # 多个收件人用英文逗号分隔

# 4. 数据库备份配置
db:
  backup:
    host: localhost           # 数据库地址
    port: 3307                # 数据库端口
    username: root            # 数据库用户名
    password:
    db-name: spring-boot      # 数据库名称
    local-path: ./db-backup/  # 数据库备份路径

# 健康检查阈值配置
server:
  monitor:
    cpu-threshold: 80.0  # CPU使用率阈值（%）
    memory-threshold: 50.0  # 内存使用率阈值（%），根据自己情况调整，以触发阈

# 配置 Actuator 暴露定时任务监控端点
management:
  endpoints:
    web:
      exposure:
        include: scheduledtasks # 暴露定时任务监控端点
  endpoint:
    scheduledtasks:
      access: unrestricted # 允许所有用户访问定时任务监控端点
logging:
  level:
    org.springframework.boot.actuator: DEBUG